# All this server does is handle the distribution of static files
server {
    listen 80 default_server;

    server_name kairos.abx.com;
    gzip on;
    gzip_disable "msie6";
    gzip_comp_level 6;
    gzip_min_length 1100;
    gzip_buffers 16 8k;
    gzip_proxied any;
    gzip_types
      text/plain
      text/css
      text/js
      text/xml
      text/javascript
      application/javascript
      application/x-javascript
      application/json
      application/xml
      application/rss+xml
      image/svg+xml;

    location /dist {
        root /sync/;
        try_files $uri $uri/;
    }

    location /images {
        root /sync/images/;
        try_files $uri $uri/;
    }

    location /robots.txt {
        root /sync;
        robots.txt;
    }

    location /public {
        root /sync/;
        try_files $uri $uri/;
    }

    location / {
        root /sync/;
        # We fallback to the index.html for BrowserHistory support
        try_files $uri $uri/ /index.html;
    }
}
